(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{25:function(e,t,a){"use strict";var s=a(14),c=a(6),n=a(7),r=a(13),i=a(12),l=a(1),o=a.n(l),u=a(21),d=a(0),j=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={active:!1,component:null,callback:function(){}},e.close=function(t){e.setState({active:!1}),e.state.callback(t)},e.open=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{props:{},component:null,callback:function(){}},a=t.props,c=t.component,n=t.callback,r=(new Date).getTime(),i=o.a.createElement(c,Object(s.a)(Object(s.a)({},a),{},{close:e.close,key:r}));e.setState({active:!0,component:i,callback:n})},e}return Object(n.a)(a,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:{true:"panel-wrapper active",false:"panel-wrapper"}[this.state.active],children:[Object(d.jsx)("div",{className:"over-layer",onClick:function(){return e.close()}}),Object(d.jsx)("div",{className:"panel",children:Object(d.jsxs)("div",{className:"head",children:[Object(d.jsx)("span",{className:"close",onClick:function(){return e.close()},children:"x"}),this.state.component]})})]})}}]),a}(l.Component),b=document.createElement("div");document.body.appendChild(b);var h=Object(u.render)(Object(d.jsx)(j,{}),b);t.a=h},29:function(e,t,a){"use strict";(function(e){var s=a(1),c=a(59),n=a(54),r=a(0);t.a=function(t){var a=Object(s.useMemo)((function(){return e.auth.getUser()||{}}),[]);return Object(r.jsxs)("div",{className:"main",children:[Object(r.jsx)(c.a,{user:a}),t.children,Object(r.jsx)(n.a,{})]})}}).call(this,a(20))},35:function(e,t,a){"use strict";(function(e){var s=a(2),c=a.n(s),n=a(9),r=a(6),i=a(7),l=a(13),o=a(12),u=a(1),d=a.n(u),j=a(25),b=a(50),h=a(8),p=a(10),m=a(3),O=a(0),x=function(t){Object(l.a)(s,t);var a=Object(o.a)(s);function s(){var t;Object(r.a)(this,s);for(var i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return(t=a.call.apply(a,[this].concat(l))).toEdit=function(){j.a.open({component:b.a,props:{product:t.props.product,deleteProduct:t.props.delete},callback:function(e){console.log(e),e&&t.props.update(e)}})},t.addCart=Object(n.a)(c.a.mark((function a(){var s,n,r,i,l,o,u,d,j,b,m;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.auth.isLogin()){a.next=4;break}return t.props.history.push("/login"),p.b.info("\u8acb\u5148\u767b\u5165"),a.abrupt("return");case 4:return a.prev=4,s=t.props.product,n=s.id,r=s.name,i=s.image,l=s.price,a.next=8,h.a.get("/carts?productId=".concat(n));case 8:if(o=a.sent,u=o.data,d=e.auth.getUser()||{},j=u.map((function(e,t){return e.userId})).indexOf(d.email),!(u&&j>-1&&u.length>0)){a.next=19;break}return(b=u[j]).mount+=1,a.next=17,h.a.put("/carts/".concat(b.id),b);case 17:a.next=22;break;case 19:return m={productId:n,name:r,image:i,price:l,userId:d.email,mount:1},a.next=22,h.a.post("/carts",m);case 22:a.next=27;break;case 24:a.prev=24,a.t0=a.catch(4),p.b.error("\u52a0\u5165\u8cfc\u7269\u8eca\u5931\u6557\uff01");case 27:t.props.updateCartNum(),p.b.success("\u52a0\u5165\u8cfc\u7269\u8eca\u6210\u529f\uff01");case 29:case"end":return a.stop()}}),a,null,[[4,24]])}))),t.renderMangerBtn=function(){if(1===(e.auth.getUser()||{}).type)return Object(O.jsx)("div",{className:"p-head has-text-right",onClick:t.toEdit,children:Object(O.jsx)("span",{className:"icon edit-btn",children:Object(O.jsx)("i",{className:"fas fa-sliders-h"})})})},t}return Object(i.a)(s,[{key:"render",value:function(){var e=this.props.product,t=e.name,a=e.tags,s=e.image,c=e.price,n=e.status;return Object(O.jsxs)("div",{className:"".concat({available:"product",unavailable:"product out-stock"}[n],' "'),children:[Object(O.jsxs)("div",{className:"p-content",children:[this.renderMangerBtn(),Object(O.jsxs)("div",{className:"img-wrapper",children:[Object(O.jsx)("div",{className:"out-stock-text",children:"\u5df2 \u5b8c \u552e"}),Object(O.jsx)("figure",{className:"image is-4by3",children:Object(O.jsx)("img",{src:s,alt:t})}),Object(O.jsx)("p",{className:"p-tags",children:a}),Object(O.jsx)("p",{className:"p-name",children:t})]})]}),Object(O.jsxs)("div",{className:"p-footer",children:[Object(O.jsxs)("p",{className:"price",children:["$",c]}),Object(O.jsxs)("button",{className:"add-cart",disabled:"unavailable"===n,onClick:this.addCart,children:[Object(O.jsx)("i",{className:"fas fa-shopping-cart"}),Object(O.jsx)("i",{className:"fas fa-exclamation"})]})]})]})}}]),s}(d.a.Component);t.a=Object(m.f)(x)}).call(this,a(20))},46:function(e,t,a){"use strict";(function(e){var s=a(2),c=a.n(s),n=a(9),r=a(5),i=a(6),l=a(7),o=a(13),u=a(12),d=a(1),j=a.n(d),b=a(47),h=a(35),p=a(8),m=a(61),O=a(60),x=a(25),v=a(52),f=a(0),N=function(t){Object(o.a)(s,t);var a=Object(u.a)(s);function s(){var t;Object(i.a)(this,s);for(var l=arguments.length,o=new Array(l),u=0;u<l;u++)o[u]=arguments[u];return(t=a.call.apply(a,[this].concat(o))).state={products:[],sourceProducts:[],cartNum:0},t.search=function(e){console.log(e);var a=Object(r.a)(t.state.sourceProducts);a=a.filter((function(t){return null!==t.name.match(new RegExp(e,"gi"))})),t.setState({products:a})},t.toAdd=function(){x.a.open({component:v.a,callback:function(e){e&&t.add(e),console.log("Product ".concat(e))}})},t.add=function(e){var a=Object(r.a)(t.state.products);a.push(e);var s=Object(r.a)(t.state.sourceProducts);s.push(e),t.setState({products:a,sourceProducts:s})},t.update=function(e){var a=Object(r.a)(t.state.products),s=a.findIndex((function(e){return e.id===h.a.id}));a.splice(s,1,e);var c=Object(r.a)(t.state.sourceProducts);c.splice(s,1,e),t.setState({products:a,sourceProducts:c})},t.delete=function(e){var a=t.state.products.filter((function(t){return t.id!==e})),s=t.state.sourceProducts.filter((function(t){return t.id!==e}));t.setState({products:a,sourceProducts:s}),console.log(t.state.products)},t.updateCartNum=Object(n.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initCartNum();case 2:a=e.sent,t.setState({cartNum:a});case 4:case"end":return e.stop()}}),e)}))),t.initCartNum=Object(n.a)(c.a.mark((function t(){var a,s,n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.auth.getUser()||{},t.next=3,p.a.get("/carts",{params:{userId:a.email}});case 3:return s=t.sent,n=s.data||[],r=n.map((function(e){return e.mount})).reduce((function(e,t){return e+t}),0),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)}))),t}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/products").then((function(t){return e.setState({products:t.data,sourceProducts:t.data})})),this.updateCartNum()}},{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)(b.a,{search:this.search,cartNum:this.state.cartNum}),Object(f.jsxs)("div",{className:"products",children:[1===(e.auth.getUser()||{}).type&&Object(f.jsx)("button",{className:"button is-primary add-btn",onClick:this.toAdd,children:"\u52a0\u5165\u65b0\u7522\u54c1"}),Object(f.jsx)("div",{className:"columns is-multiline ",children:Object(f.jsx)(m.a,{component:null,children:this.state.products.map((function(e){return Object(f.jsx)(O.a,{classNames:"product-fade",timeout:300,children:Object(f.jsx)("div",{className:"column is-3-desktop is-4-tablet",children:Object(f.jsx)(h.a,{product:e,update:t.update,delete:t.delete,updateCartNum:t.updateCartNum},e.id)},e.id)},e.id)}))})})]})]})}}]),s}(j.a.Component);t.a=N}).call(this,a(20))},47:function(e,t,a){"use strict";(function(e){var s=a(6),c=a(7),n=a(13),r=a(12),i=a(1),l=a.n(i),o=a(3),u=a(10),d=a(0),j=function(t){Object(n.a)(i,t);var a=Object(r.a)(i);function i(){var t;Object(s.a)(this,i);for(var c=arguments.length,n=new Array(c),r=0;r<c;r++)n[r]=arguments[r];return(t=a.call.apply(a,[this].concat(n))).state={searchText:""},t.handleChange=function(e){var a=e.target.value;t.setState({searchText:a}),t.props.search(a)},t.clearSearchText=function(){t.setState({searchText:""}),t.props.search("")},t.goCart=function(){if(!e.auth.isLogin())return t.props.history.push("/login"),void u.b.info("\u8acb\u5148\u767b\u5165");t.props.history.push("/cart")},t}return Object(c.a)(i,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"tool-box",children:[Object(d.jsx)("div",{className:"logo-text",children:"\u8568\u9e7f\u9022\u751f"}),Object(d.jsx)("div",{className:"search-box",children:Object(d.jsxs)("div",{className:"field has-addons",children:[Object(d.jsx)("div",{className:"control",children:Object(d.jsx)("input",{type:"text",className:"input search-input",placeholder:"\u641c\u5c0b\u690d\u7269\u95dc\u9375\u5b57",value:this.state.searchText,onChange:this.handleChange})}),Object(d.jsx)("div",{className:"control",children:Object(d.jsx)("button",{className:"button",onClick:this.clearSearchText,children:"X"})})]})}),Object(d.jsxs)("div",{className:"cart-box",onClick:this.goCart,children:[Object(d.jsx)("i",{className:"fas fa-shopping-cart"}),Object(d.jsxs)("span",{className:"cart-num",children:["(",this.props.cartNum,")"]})]})]})}}]),i}(l.a.Component);t.a=Object(o.f)(j)}).call(this,a(20))},50:function(e,t,a){"use strict";var s=a(14),c=a(18),n=a(6),r=a(7),i=a(13),l=a(12),o=a(1),u=a(8),d=a(10),j=a(0),b=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={id:"",name:"",price:0,tags:"",image:"",status:"available"},e.handleChange=function(t){var a=t.target.value,s=t.target.name;e.setState(Object(c.a)({},s,a))},e.submit=function(t){t.preventDefault();var a=Object(s.a)({},e.state);u.a.put("products/".concat(e.state.id),a).then((function(t){console.log(t.data),e.props.close(t.data),d.b.success("\u7de8\u8f2f\u6210\u529f\uff01\uff01")}))},e.onDelete=function(){u.a.delete("products/".concat(e.state.id)).then((function(t){e.props.deleteProduct(e.state.id),e.props.close(),d.b.success("\u522a\u9664\u6210\u529f\uff01\uff01")}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.product,t=e.id,a=e.name,s=e.image,c=e.tags,n=e.price,r=e.status;this.setState({id:t,name:a,image:s,tags:c,price:n,status:r})}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"inventory",children:[Object(j.jsx)("p",{className:"title has-text-centered",children:"\u8ca8\u54c1\u8cc7\u8a0a"}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u5546\u54c1\u540d\u7a31"}),Object(j.jsx)("textarea",{className:"textarea",placeholder:"Textarea",name:"name",value:this.state.name,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u5546\u54c1\u50f9\u683c"}),Object(j.jsx)("input",{type:"number",className:"input",name:"price",value:this.state.price,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u9644\u8a3b"}),Object(j.jsx)("input",{type:"text",className:"input",name:"tags",value:this.state.tags,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u5716\u7247\u8def\u5f91"}),Object(j.jsx)("input",{type:"text",className:"input",name:"image",value:this.state.image,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u5b58\u8ca8\u72c0\u614b"}),Object(j.jsx)("div",{className:"select is-fullwidth",children:Object(j.jsxs)("select",{name:"status",value:this.state.status,onChange:this.handleChange,children:[Object(j.jsx)("option",{children:"\u6709\u5eab\u5b58"}),Object(j.jsx)("option",{children:"\u7121\u5eab\u5b58"})]})})]})}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"field is-grouped is-grouped-centered",children:[Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{className:"button is-link",onClick:this.submit,children:"Submit"})}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{className:"button is-danger",type:"button",onClick:this.onDelete,children:"Delete"})}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{className:"button",type:"button",onClick:function(){return e.props.close()},children:"Cancel"})})]})]})}}]),a}(o.Component);t.a=b},52:function(e,t,a){"use strict";var s=a(14),c=a(18),n=a(6),r=a(7),i=a(13),l=a(12),o=a(1),u=a(8),d=a(10),j=a(0),b=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={name:"",price:0,tags:"",image:"",status:"available"},e.handleChange=function(t){var a=t.target.value,s=t.target.name;e.setState(Object(c.a)({},s,a))},e.submit=function(t){t.preventDefault();var a=Object(s.a)({},e.state);u.a.post("products",a).then((function(t){console.log(t.data),e.props.close(t.data),d.b.success("\u65b0\u589e\u6210\u529f\uff01\uff01")}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"inventory",children:[Object(j.jsx)("p",{className:"title has-text-centered",children:"\u8ca8\u54c1\u8cc7\u8a0a"}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u5546\u54c1\u540d\u7a31"}),Object(j.jsx)("textarea",{className:"textarea",name:"name",value:this.state.name,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u5546\u54c1\u50f9\u683c"}),Object(j.jsx)("input",{type:"number",className:"input",name:"price",value:this.state.price,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u9644\u8a3b"}),Object(j.jsx)("input",{type:"text",className:"input",name:"tags",value:this.state.tags,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"\u5716\u7247\u8def\u5f91"}),Object(j.jsx)("input",{type:"text",className:"input",name:"image",value:this.state.image,onChange:this.handleChange})]})}),Object(j.jsx)("div",{className:"field",children:Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("label",{className:"label",children:"Status"}),Object(j.jsx)("div",{className:"select is-fullwidth",children:Object(j.jsxs)("select",{name:"status",value:this.state.status,onChange:this.handleChange,children:[Object(j.jsx)("option",{children:"\u6709\u5eab\u5b58"}),Object(j.jsx)("option",{children:"\u7121\u5eab\u5b58"})]})})]})}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"field is-grouped is-grouped-centered",children:[Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{className:"button is-link",onClick:this.submit,children:"\u78ba\u8a8d"})}),Object(j.jsx)("button",{className:"button",type:"button",onClick:function(){return e.props.close()},children:"\u53d6\u6d88"})]})]})}}]),a}(o.Component);t.a=b},53:function(e,t,a){"use strict";(function(e){a(1);var s=a(0);t.a=function(t){return Object(s.jsxs)("div",{className:"user-profile",children:[Object(s.jsx)("p",{className:"title has-text-centered",children:"\u500b\u4eba\u8cc7\u6599"}),Object(s.jsxs)("fieldset",{disabled:!0,children:[Object(s.jsx)("div",{className:"field",children:Object(s.jsxs)("div",{className:"control",children:[Object(s.jsx)("label",{className:"label",children:"\u66b1\u7a31"}),Object(s.jsx)("input",{type:"text",className:"input",defaultValue:t.user.nickname})]})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsxs)("div",{className:"control",children:[Object(s.jsx)("label",{className:"label",children:"\u96fb\u5b50\u4fe1\u7bb1"}),Object(s.jsx)("input",{type:"text",className:"input",defaultValue:t.user.email})]})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsxs)("div",{className:"control",children:[Object(s.jsx)("label",{className:"label",children:"\u5e33\u6236\u985e\u5225"}),Object(s.jsx)("input",{type:"text",className:"input",defaultValue:1===t.user.type?"\u7ba1\u7406\u8005":"\u4e00\u822c\u7528\u6236"})]})})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"field is-grouped is-grouped-centered",children:[Object(s.jsx)("div",{className:"control",children:Object(s.jsx)("button",{className:"button is-danger",type:"button",onClick:function(){e.auth.logout(),t.close("Logout")},children:"\u767b\u51fa"})}),Object(s.jsx)("button",{className:"button",type:"button",onClick:function(){return t.close()},children:"\u53d6\u6d88"})]})]})}}).call(this,a(20))},54:function(e,t,a){"use strict";a(1);var s=a(0);t.a=function(){return Object(s.jsx)("div",{className:"footer",children:Object(s.jsxs)("div",{className:"f-content",children:[Object(s.jsx)("p",{children:"\u672c\u7db2\u9801\u7d14\u5c6c\u7df4\u7fd2\u7a0b\u5f0f\u9700\u6c42\uff0c\u7121\u5546\u696d\u884c\u70ba"}),Object(s.jsx)("p",{children:"\u5716\u7247\u7686\u53d6\u81ea\u7db2\u8def"})]})})}},55:function(e,t,a){"use strict";(function(e){var s=a(14),c=a(2),n=a.n(c),r=a(9),i=a(30),l=a(8),o=a(10),u=a(0);t.a=function(t){var a=Object(i.a)(),c=a.register,d=a.handleSubmit,j=a.formState.errors,b=function(){var a=Object(r.a)(n.a.mark((function a(s){var c,r,i,u,d;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=s.email,r=s.password,a.next=4,l.a.post("/auth/login",{email:c,password:r});case 4:i=a.sent,u=i.data,e.auth.setToken(u),o.b.success("\u767b\u5165\u6210\u529f"),t.history.push("/"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),d=a.t0.response.data.message,o.b.error(d);case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"login-wrapper",children:Object(u.jsxs)("form",{className:"box login-box",onSubmit:d(b),children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"\u96fb\u5b50\u4fe1\u7bb1"}),Object(u.jsxs)("div",{className:"control",children:[Object(u.jsx)("input",Object(s.a)({className:"input ".concat(j.email&&"is-danger"),name:"email",type:"text",placeholder:"email"},c("email",{required:"\u9700\u8981\u586b\u5beb\u4fe1\u7bb1",pattern:{value:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,message:"\u683c\u5f0f\u932f\u8aa4"}}))),j.email&&Object(u.jsx)("p",{className:"helper has-text-danger",children:j.email.message})]})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"\u5bc6\u78bc"}),Object(u.jsxs)("div",{className:"control",children:[Object(u.jsx)("input",Object(s.a)({className:"input ".concat(j.password&&"is-danger"),name:"password",type:"password",placeholder:"password"},c("password",{required:"\u9700\u8981\u586b\u5beb\u5bc6\u78bc",minLength:{value:6,message:"\u5bc6\u78bc\u9700\u8981\u5927\u65bc6\u4f4d\u6578"}}))),j.password&&Object(u.jsx)("p",{className:"helper has-text-danger",children:j.password.message})]})]}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("button",{className:"button is-fullwidth is-primary",children:"Login"})})]})})}}).call(this,a(20))},56:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var s=a(5),c=a(6),n=a(7),r=a(13),i=a(12),l=a(1),o=a(8),u=a(61),d=a(60),j=a(29),b=a(57),h=a(0),p=function(t){Object(r.a)(l,t);var a=Object(i.a)(l);function l(){var e;Object(c.a)(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={carts:[]},e.totalPrice=function(){return e.state.carts.map((function(e){return e.mount*parseInt(e.price)})).reduce((function(e,t){return e+t}),0)},e.updateCart=function(t){var a=Object(s.a)(e.state.carts),c=a.findIndex((function(e){return e.id===t.id}));a.splice(c,1,t),e.setState({carts:a})},e.deleteCart=function(t){var a=e.state.carts.filter((function(e){return e.id!==t.id}));e.setState({carts:a})},e}return Object(n.a)(l,[{key:"componentDidMount",value:function(){var t=this,a=e.auth.getUser()||{};o.a.get("/carts?userId=".concat(a.email)).then((function(e){return t.setState({carts:e.data})}))}},{key:"render",value:function(){var e=this;return Object(h.jsx)(j.a,{children:Object(h.jsxs)("div",{className:"cart-page",children:[Object(h.jsx)("span",{className:"cart-title",children:"\u8cfc\u7269\u8eca"}),Object(h.jsx)("div",{className:"cart-list",children:Object(h.jsx)(u.a,{component:null,children:this.state.carts.map((function(t){return Object(h.jsx)(d.a,{classNames:"cart-item",timeout:300,children:Object(h.jsx)(b.a,{cart:t,updateCart:e.updateCart,deleteCart:e.deleteCart},t.id)},t.id)}))})}),0===this.state.carts.length&&Object(h.jsx)("p",{className:"no-cart",children:"\u9084\u6c92\u6709\u5546\u54c1\uff0c\u8d95\u5feb\u52a0\u5165\u8cfc\u7269\u8eca\u5427\uff01"}),Object(h.jsxs)("div",{className:"cart-total",children:["\u7e3d\u984d: ",Object(h.jsxs)("span",{className:"total-price",children:["$",this.totalPrice()]})]})]})})}}]),l}(l.Component)}).call(this,a(20))},57:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(14),c=a(6),n=a(7),r=a(13),i=a(12),l=a(1),o=a(8),u=a(0),d=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=parseInt(e.target.value);n.setState({mount:t});var a=Object(s.a)(Object(s.a)({},n.props.cart),{},{mount:t});o.a.put("/carts/".concat(n.props.cart.id),a).then((function(e){n.props.updateCart(a)}))},n.deleteCart=function(){o.a.delete("/carts/".concat(n.props.cart.id)).then((function(e){return n.props.deleteCart(n.props.cart)}))},n.state={mount:n.props.cart.mount},n}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.cart||{},t=e.name,a=e.image,s=e.price,c=this.state.mount*parseInt(s);return Object(u.jsxs)("div",{className:"columns is-vcentered",children:[Object(u.jsx)("div",{className:"column is-narrow",onClick:this.deleteCart,children:Object(u.jsx)("span",{className:"close",children:"X"})}),Object(u.jsx)("div",{className:"column is-narrow",children:Object(u.jsx)("div",{className:"cart-image",children:Object(u.jsx)("img",{src:a,alt:""})})}),Object(u.jsx)("div",{className:"column cart-name is-narrow",children:t}),Object(u.jsx)("div",{className:"column",children:Object(u.jsxs)("span",{className:"price",children:["$",s]})}),Object(u.jsx)("div",{className:"column",children:Object(u.jsx)("input",{type:"number",min:1,className:"input num-input",defaultValue:this.state.mount,onChange:this.handleChange})}),Object(u.jsx)("div",{className:"column",children:Object(u.jsxs)("span",{className:"sum-price",children:["$",c]})})]})}}]),a}(l.Component)},58:function(e,t,a){"use strict";(function(e){var s=a(14),c=a(2),n=a.n(c),r=a(9),i=a(30),l=a(8),o=a(10),u=a(0);t.a=function(t){var a=Object(i.a)(),c=a.register,d=a.handleSubmit,j=a.formState.errors,b=function(){var a=Object(r.a)(n.a.mark((function a(s){var c,r,i,u,d,j;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(s),a.prev=1,c=s.nickname,r=s.email,i=s.password,a.next=5,l.a.post("/auth/register",{nickname:c,email:r,password:i,type:0});case 5:u=a.sent,d=u.data,e.auth.setToken(d),console.log(d),o.b.success("\u8a3b\u518a\u6210\u529f"),t.history.push("/"),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(1),j=a.t0.response.data.message,o.b.error(j);case 17:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"login-wrapper",children:Object(u.jsxs)("form",{className:"box login-box",onSubmit:d(b),children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"\u66b1\u7a31"}),Object(u.jsxs)("div",{className:"control",children:[Object(u.jsx)("input",Object(s.a)({className:"input ".concat(j.nickname&&"is-danger"),name:"nickname",type:"text",placeholder:"nickname"},c("nickname",{required:"\u9700\u8981\u586b\u5beb\u66b1\u7a31"}))),j.nickname&&Object(u.jsx)("p",{className:"helper has-text-danger",children:j.nickname.message})]})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"\u96fb\u5b50\u4fe1\u7bb1"}),Object(u.jsxs)("div",{className:"control",children:[Object(u.jsx)("input",Object(s.a)({className:"input ".concat(j.email&&"is-danger"),name:"email",type:"text",placeholder:"email"},c("email",{required:"\u9700\u8981\u586b\u5beb\u4fe1\u7bb1",pattern:{value:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,message:"\u683c\u5f0f\u932f\u8aa4"}}))),j.email&&Object(u.jsx)("p",{className:"helper has-text-danger",children:j.email.message})]})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"\u5bc6\u78bc"}),Object(u.jsxs)("div",{className:"control",children:[Object(u.jsx)("input",Object(s.a)({className:"input ".concat(j.password&&"is-danger"),name:"password",type:"password",placeholder:"password"},c("password",{required:"\u9700\u8981\u586b\u5beb\u5bc6\u78bc",minLength:{value:6,message:"\u5bc6\u78bc\u9700\u8981\u5927\u65bc6\u4f4d\u6578"}}))),j.password&&Object(u.jsx)("p",{className:"helper has-text-danger",children:j.password.message})]})]}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("button",{className:"button is-fullwidth is-primary",children:"\u78ba\u8a8d"})})]})})}}).call(this,a(20))},59:function(e,t,a){"use strict";var s=a(1),c=a.n(s),n=a(27),r=a(3),i=a(53),l=a(25),o=a(23),u=function(){var e=Object(s.useState)("mobile"),t=Object(o.a)(e,2),a=t[0],c=t[1],n=function(){window.innerWidth>1068?c("PC"):window.innerWidth>576?c("tablet"):c("mobile")};return Object(s.useEffect)((function(){return window.addEventListener("resize",n),n(),function(){window.removeEventListener("resize",n)}}),[]),a},d=a(0);t.a=Object(r.f)((function(e){var t=e.user,a=e.history,s=u();return Object(d.jsx)("div",{className:"header",children:Object(d.jsxs)("div",{className:"grid",children:[Object(d.jsx)("div",{className:"start",children:Object(d.jsx)(n.b,{to:"/",children:"mobile"===s?Object(d.jsx)("p",{children:"\u8568\u9e7f\u9022\u751f"}):Object(d.jsx)("p",{children:"Home"})})}),Object(d.jsx)("div",{className:"end",children:t.nickname?Object(d.jsxs)("span",{className:"nickname",onClick:function(){l.a.open({component:i.a,props:{user:t},callback:function(e){console.log(e),"Logout"===e&&a.go(0)}})},children:[Object(d.jsx)("i",{className:"far fa-user"}),t.nickname]}):Object(d.jsxs)(c.a.Fragment,{children:[Object(d.jsx)(n.b,{to:"/login",children:"Login"}),Object(d.jsx)(n.b,{to:"/register",children:"Register"})]})})]})})}))},8:function(e,t,a){"use strict";(function(e){var s=a(51),c=a.n(s);t.a=function(t){var a=c.a.create({baseURL:"http://localhost:3004",timeout:"1000"});return a.interceptors.request.use((function(t){var a=e.auth.getToken();return t.headers.Authorization="Bearer "+a,t}),(function(e){return Promise.reject(e)})),a}()}).call(this,a(20))},93:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){"use strict";(function(e){var t=a(36),s="store_token_id",c=function(e){return localStorage.getItem(s)},n=function(){var e=c();return!!e&&!r(e)},r=function(e){try{return Object(t.a)(e).exp<Date.now()/1e3}catch(a){return!1}};e.auth={setToken:function(e){localStorage.setItem(s,e)},getUser:function(){var e=c();return n()?Object(t.a)(e):null},isLogin:n,logout:function(){localStorage.removeItem(s)},getToken:c}}).call(this,a(20))},97:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(21),r=a.n(n),i=a(27),l=a(3),o=a(6),u=a(7),d=a(13),j=a(12),b=a(46),h=a(29),p=a(0),m=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(p.jsx)(h.a,{children:Object(p.jsx)(b.a,{})})}}]),a}(c.a.Component),O=a(55),x=a(56),v=function(){return Object(p.jsx)("div",{className:"not-found",children:"NOT FOUND"})},f=a(58),N=function(){return Object(p.jsx)(i.a,{children:Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{path:"/",exact:!0,component:m}),Object(p.jsx)(l.a,{path:"/login",component:O.a}),Object(p.jsx)(l.a,{path:"/cart",component:x.a}),Object(p.jsx)(l.a,{path:"/register",component:f.a}),Object(p.jsx)(l.a,{component:v})]})})},g=(a(93),a(94),a(10));a(95),a(96);r.a.render(Object(p.jsxs)("div",{children:[Object(p.jsx)(g.a,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisionChange:!0,draggable:!0,pauseOnHover:!0}),Object(p.jsx)(N,{})]}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.a9c26bc7.chunk.js.map