{"version":3,"sources":["component/Panel.js","Layout.js","component/Product.js","component/Products.js","component/ToolBox.js","component/EditInventory.js","component/AddInventory.js","component/UserProfile.js","component/Footer.js","pages/Login.js","pages/Cart.js","component/CartItem.js","pages/Register.js","commons/useRWD.js","component/Header.js","commons/axios.js","commons/auth.js","pages/App.js","pages/NotFound.js","Router.js","index.js"],"names":["Panel","state","active","component","callback","close","data","setState","open","options","props","_key","Date","getTime","_component","React","createElement","key","className","true","false","this","onClick","Component","_div","document","body","appendChild","_panel","render","Layout","user","useMemo","global","auth","getUser","children","Product","toEdit","EditInventory","product","deleteProduct","delete","console","log","update","addCart","a","isLogin","history","push","toast","info","id","name","image","price","axios","get","res","carts","result","map","item","i","userId","indexOf","email","length","cart","mount","put","productId","post","error","updateCartNum","success","renderMangerBtn","type","tags","status","available","unavailable","src","alt","disabled","withRouter","Products","products","sourceProducts","cartNum","search","text","_products","filter","p","match","RegExp","toAdd","AddInventory","add","_sProducts","_index","findIndex","splice","initCartNum","params","cartsNum","reduce","value","then","response","classNames","timeout","ToolBox","searchText","handleChange","e","target","clearSearchText","goCart","placeholder","onChange","submit","preventDefault","onDelete","UserProfile","defaultValue","nickname","logout","Footer","Login","useForm","register","handleSubmit","errors","formState","onSubmit","password","jwToken","setToken","message","required","pattern","minLength","totalPrice","parseInt","updateCart","newCarts","c","deleteCart","_cart","CartItem","_mount","newCart","sumPrice","min","Register","useRWD","useState","device","setDevice","handleRWD","window","innerWidth","useEffect","addEventListener","removeEventListener","to","go","Fragment","baseURL","instance","_axios","create","interceptors","request","use","config","getToken","headers","Promise","reject","JWT","token","localStorage","getItem","isTokenExpired","decode","exp","now","setItem","removeItem","App","NotFound","Router","path","exact","Cart","ReactDOM","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisionChange","draggable","pauseOnHover","getElementById"],"mappings":"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","file":"static/js/main.a9c26bc7.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\n\nclass Panel extends Component {\n  state = {\n    active: false,\n    component: null,\n    callback: () => {},\n  };\n\n  close = (data) => {\n    this.setState({ active: false });\n    this.state.callback(data);\n  };\n\n  open = (\n    options = {\n      props: {},\n      component: null,\n      callback: () => {},\n    }\n  ) => {\n    const { props, component, callback } = options;\n    const _key = new Date().getTime();\n    const _component = React.createElement(component, {\n      ...props,\n      close: this.close,\n      key: _key,\n    });\n\n    this.setState({ active: true, component: _component, callback: callback });\n  };\n\n  render() {\n    const _class = {\n      true: \"panel-wrapper active\",\n      false: \"panel-wrapper\",\n    };\n\n    return (\n      <div className={_class[this.state.active]}>\n        <div className=\"over-layer\" onClick={() => this.close()}></div>\n\n        <div className=\"panel\">\n          <div className=\"head\">\n            <span className=\"close\" onClick={() => this.close()}>\n              x\n            </span>\n            {this.state.component}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst _div = document.createElement(\"div\");\ndocument.body.appendChild(_div);\nconst _panel = render(<Panel />, _div);\n\nexport default _panel;\n","import React, { useMemo } from \"react\";\nimport Header from \"component/Header\";\nimport Footer from \"component/Footer\";\n\nconst Layout = (props) => {\n  const user = useMemo(() => {\n    return global.auth.getUser() || {};\n  }, []);\n  return (\n    <div className=\"main\">\n      <Header user={user} />\n      {props.children}\n      <Footer />\n    </div>\n  );\n};\n\nexport default Layout;\n","import React from \"react\";\nimport Panel from \"component/Panel\";\nimport EditInventory from \"./EditInventory\";\nimport axios from \"commons/axios\";\nimport { toast } from \"react-toastify\";\nimport { withRouter } from \"react-router\";\n\nclass Product extends React.Component {\n  toEdit = () => {\n    Panel.open({\n      component: EditInventory,\n      props: {\n        product: this.props.product,\n        deleteProduct: this.props.delete,\n      },\n      callback: (data) => {\n        console.log(data);\n        if (data) {\n          this.props.update(data);\n        }\n      },\n    });\n  };\n\n  addCart = async () => {\n    if (!global.auth.isLogin()) {\n      this.props.history.push(\"/login\");\n      toast.info(\"請先登入\");\n      return;\n    }\n\n    try {\n      const { id, name, image, price } = this.props.product;\n      const res = await axios.get(`/carts?productId=${id}`);\n      const carts = res.data;\n      const user = global.auth.getUser() || {};\n\n      const result = carts\n        .map((item, i) => {\n          return item.userId;\n        })\n        .indexOf(user.email);\n\n      if (carts && result > -1 && carts.length > 0) {\n        const cart = carts[result];\n        cart.mount += 1;\n        await axios.put(`/carts/${cart.id}`, cart);\n      } else {\n        const cart = {\n          productId: id,\n          name,\n          image,\n          price,\n          userId: user.email,\n          mount: 1,\n        };\n        await axios.post(\"/carts\", cart);\n      }\n    } catch {\n      toast.error(\"加入購物車失敗！\");\n    }\n    this.props.updateCartNum();\n    toast.success(\"加入購物車成功！\");\n  };\n\n  renderMangerBtn = () => {\n    const user = global.auth.getUser() || {};\n\n    if (user.type === 1) {\n      return (\n        <div className=\"p-head has-text-right\" onClick={this.toEdit}>\n          <span className=\"icon edit-btn\">\n            <i className=\"fas fa-sliders-h\"></i>\n          </span>\n        </div>\n      );\n    }\n  };\n\n  render() {\n    const { name, tags, image, price, status } = this.props.product;\n    const _pClass = {\n      available: \"product\",\n      unavailable: \"product out-stock\",\n    };\n    return (\n      <div className={`${_pClass[status]} \"`}>\n        <div className=\"p-content\">\n          {this.renderMangerBtn()}\n          <div className=\"img-wrapper\">\n            <div className=\"out-stock-text\">已 完 售</div>\n            <figure className=\"image is-4by3\">\n              <img src={image} alt={name} />\n            </figure>\n            <p className=\"p-tags\">{tags}</p>\n            <p className=\"p-name\">{name}</p>\n          </div>\n        </div>\n        <div className=\"p-footer\">\n          <p className=\"price\">${price}</p>\n          <button\n            className=\"add-cart\"\n            disabled={status === \"unavailable\"}\n            onClick={this.addCart}\n          >\n            <i className=\"fas fa-shopping-cart\"></i>\n            <i className=\"fas fa-exclamation\"></i>\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Product);\n","import React from \"react\";\nimport ToolBox from \"./ToolBox\";\nimport Product from \"./Product\";\nimport axios from \"commons/axios\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport Panel from \"./Panel\";\nimport AddInventory from \"./AddInventory\";\n\nclass Products extends React.Component {\n  state = {\n    products: [],\n    sourceProducts: [],\n    cartNum: 0,\n  };\n\n  componentDidMount() {\n    axios.get(\"/products\").then((response) =>\n      this.setState({\n        products: response.data,\n        sourceProducts: response.data,\n      })\n    );\n    this.updateCartNum();\n  }\n\n  search = (text) => {\n    console.log(text);\n    //複製新的陣列\n    let _products = [...this.state.sourceProducts];\n    //過濾這個陣列\n    _products = _products.filter((p) => {\n      const matchArray = p.name.match(new RegExp(text, \"gi\"));\n      return matchArray !== null;\n    });\n    //更新陣列\n    this.setState({\n      products: _products,\n    });\n  };\n\n  toAdd = () => {\n    Panel.open({\n      component: AddInventory,\n      callback: (data) => {\n        if (data) {\n          this.add(data);\n        }\n        console.log(`Product ${data}`);\n      },\n    });\n  };\n\n  add = (product) => {\n    const _products = [...this.state.products];\n    _products.push(product);\n    const _sProducts = [...this.state.sourceProducts];\n    _sProducts.push(product);\n    this.setState({\n      products: _products,\n      sourceProducts: _sProducts,\n    });\n  };\n\n  update = (product) => {\n    const _products = [...this.state.products];\n    const _index = _products.findIndex((p) => p.id === Product.id);\n    _products.splice(_index, 1, product);\n    const _sProducts = [...this.state.sourceProducts];\n    _sProducts.splice(_index, 1, product);\n\n    this.setState({\n      products: _products,\n      sourceProducts: _sProducts,\n    });\n  };\n\n  delete = (id) => {\n    const _products = this.state.products.filter((p) => p.id !== id);\n    const _sProducts = this.state.sourceProducts.filter((p) => p.id !== id);\n    this.setState({\n      products: _products,\n      sourceProducts: _sProducts,\n    });\n    console.log(this.state.products);\n  };\n\n  updateCartNum = async () => {\n    const cartNum = await this.initCartNum();\n    this.setState({ cartNum: cartNum });\n  };\n\n  initCartNum = async () => {\n    const user = global.auth.getUser() || {};\n    const res = await axios.get(\"/carts\", {\n      params: {\n        userId: user.email,\n      },\n    });\n    const carts = res.data || [];\n    const cartsNum = carts\n      .map((cart) => cart.mount)\n      .reduce((a, value) => a + value, 0);\n    return cartsNum;\n  };\n\n  render() {\n    return (\n      <div>\n        <ToolBox search={this.search} cartNum={this.state.cartNum} />\n\n        <div className=\"products\">\n          {(global.auth.getUser() || {}).type === 1 && (\n            <button className=\"button is-primary add-btn\" onClick={this.toAdd}>\n              加入新產品\n            </button>\n          )}\n          {/* is-desktop */}\n          <div className=\"columns is-multiline \">\n            <TransitionGroup component={null}>\n              {this.state.products.map((product) => {\n                return (\n                  <CSSTransition\n                    classNames=\"product-fade\"\n                    timeout={300}\n                    key={product.id}\n                  >\n                    <div\n                      className=\"column is-3-desktop is-4-tablet\"\n                      key={product.id}\n                    >\n                      <Product\n                        product={product}\n                        update={this.update}\n                        delete={this.delete}\n                        key={product.id}\n                        updateCartNum={this.updateCartNum}\n                      />\n                    </div>\n                  </CSSTransition>\n                );\n              })}\n            </TransitionGroup>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Products;\n","import React from \"react\";\nimport { withRouter } from \"react-router\";\n\nimport { toast } from \"react-toastify\";\n\nclass ToolBox extends React.Component {\n  state = {\n    searchText: \"\",\n  };\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      searchText: value,\n    });\n    this.props.search(value);\n  };\n\n  clearSearchText = () => {\n    this.setState({\n      searchText: \"\",\n    });\n    this.props.search(\"\");\n  };\n\n  goCart = () => {\n    if (!global.auth.isLogin()) {\n      this.props.history.push(\"/login\");\n      toast.info(\"請先登入\");\n      return;\n    }\n\n    this.props.history.push(\"/cart\");\n  };\n\n  render() {\n    return (\n      <div className=\"tool-box\">\n        <div className=\"logo-text\">蕨鹿逢生</div>\n        <div className=\"search-box\">\n          <div className=\"field has-addons\">\n            <div className=\"control\">\n              <input\n                type=\"text\"\n                className=\"input search-input\"\n                placeholder=\"搜尋植物關鍵字\"\n                value={this.state.searchText}\n                onChange={this.handleChange}\n              />\n            </div>\n            <div className=\"control\">\n              <button className=\"button\" onClick={this.clearSearchText}>\n                X\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"cart-box\" onClick={this.goCart}>\n          <i className=\"fas fa-shopping-cart\"></i>\n          <span className=\"cart-num\">({this.props.cartNum})</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(ToolBox);\n","import React, { Component } from \"react\";\nimport axios from \"commons/axios\";\nimport { toast } from \"react-toastify\";\n\nclass EditInventory extends Component {\n  state = {\n    id: \"\",\n    name: \"\",\n    price: 0,\n    tags: \"\",\n    image: \"\",\n    status: \"available\",\n  };\n\n  componentDidMount() {\n    const { id, name, image, tags, price, status } = this.props.product;\n    this.setState({\n      id,\n      name,\n      image,\n      tags,\n      price,\n      status,\n    });\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    const name = e.target.name;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  submit = (e) => {\n    e.preventDefault();\n    const product = { ...this.state };\n    axios.put(`products/${this.state.id}`, product).then((res) => {\n      console.log(res.data);\n      this.props.close(res.data);\n      toast.success(\"編輯成功！！\");\n    });\n  };\n\n  onDelete = () => {\n    axios.delete(`products/${this.state.id}`).then((res) => {\n      this.props.deleteProduct(this.state.id);\n      this.props.close();\n      toast.success(\"刪除成功！！\");\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"inventory\">\n        <p className=\"title has-text-centered\">貨品資訊</p>\n\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">商品名稱</label>\n            <textarea\n              className=\"textarea\"\n              placeholder=\"Textarea\"\n              name=\"name\"\n              value={this.state.name}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">商品價格</label>\n            <input\n              type=\"number\"\n              className=\"input\"\n              name=\"price\"\n              value={this.state.price}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">附註</label>\n            <input\n              type=\"text\"\n              className=\"input\"\n              name=\"tags\"\n              value={this.state.tags}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">圖片路徑</label>\n            <input\n              type=\"text\"\n              className=\"input\"\n              name=\"image\"\n              value={this.state.image}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">存貨狀態</label>\n            <div className=\"select is-fullwidth\">\n              <select\n                name=\"status\"\n                value={this.state.status}\n                onChange={this.handleChange}\n              >\n                <option>有庫存</option>\n                <option>無庫存</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <br />\n        <div className=\"field is-grouped is-grouped-centered\">\n          <div className=\"control\">\n            <button className=\"button is-link\" onClick={this.submit}>\n              Submit\n            </button>\n          </div>\n          <div className=\"control\">\n            <button\n              className=\"button is-danger\"\n              type=\"button\"\n              onClick={this.onDelete}\n            >\n              Delete\n            </button>\n          </div>\n          <div className=\"control\">\n            <button\n              className=\"button\"\n              type=\"button\"\n              onClick={() => this.props.close()}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditInventory;\n","import React, { Component } from \"react\";\nimport axios from \"commons/axios\";\nimport { toast } from \"react-toastify\";\n\nclass AddInventory extends Component {\n  state = {\n    name: \"\",\n    price: 0,\n    tags: \"\",\n    image: \"\",\n    status: \"available\",\n  };\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    const name = e.target.name;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  submit = (e) => {\n    e.preventDefault();\n    const product = { ...this.state };\n    axios.post(\"products\", product).then((res) => {\n      console.log(res.data);\n      this.props.close(res.data);\n      toast.success(\"新增成功！！\");\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"inventory\">\n        <p className=\"title has-text-centered\">貨品資訊</p>\n\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">商品名稱</label>\n            <textarea\n              className=\"textarea\"\n              name=\"name\"\n              value={this.state.name}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">商品價格</label>\n            <input\n              type=\"number\"\n              className=\"input\"\n              name=\"price\"\n              value={this.state.price}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">附註</label>\n            <input\n              type=\"text\"\n              className=\"input\"\n              name=\"tags\"\n              value={this.state.tags}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">圖片路徑</label>\n            <input\n              type=\"text\"\n              className=\"input\"\n              name=\"image\"\n              value={this.state.image}\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">Status</label>\n            <div className=\"select is-fullwidth\">\n              <select\n                name=\"status\"\n                value={this.state.status}\n                onChange={this.handleChange}\n              >\n                <option>有庫存</option>\n                <option>無庫存</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <br />\n        <div className=\"field is-grouped is-grouped-centered\">\n          <div className=\"control\">\n            <button className=\"button is-link\" onClick={this.submit}>\n              確認\n            </button>\n          </div>\n          <button\n            className=\"button\"\n            type=\"button\"\n            onClick={() => this.props.close()}\n          >\n            取消\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddInventory;\n","import React from \"react\";\n\nconst UserProfile = (props) => {\n  const logout = () => {\n    global.auth.logout();\n    props.close(\"Logout\");\n  };\n\n  return (\n    <div className=\"user-profile\">\n      <p className=\"title has-text-centered\">個人資料</p>\n      <fieldset disabled>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">暱稱</label>\n            <input\n              type=\"text\"\n              className=\"input\"\n              defaultValue={props.user.nickname}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">電子信箱</label>\n            <input\n              type=\"text\"\n              className=\"input\"\n              defaultValue={props.user.email}\n            />\n          </div>\n        </div>\n        <div className=\"field\">\n          <div className=\"control\">\n            <label className=\"label\">帳戶類別</label>\n            <input\n              type=\"text\"\n              className=\"input\"\n              defaultValue={props.user.type === 1 ? \"管理者\" : \"一般用戶\"}\n            />\n          </div>\n        </div>\n      </fieldset>\n      <br />\n      <br />\n      <div className=\"field is-grouped is-grouped-centered\">\n        <div className=\"control\">\n          <button className=\"button is-danger\" type=\"button\" onClick={logout}>\n            登出\n          </button>\n        </div>\n        <button className=\"button\" type=\"button\" onClick={() => props.close()}>\n          取消\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default UserProfile;\n","import React from \"react\";\n\nconst Footer = () => {\n  return (\n    <div className=\"footer\">\n      <div className=\"f-content\">\n        <p>本網頁純屬練習程式需求，無商業行為</p>\n        <p>圖片皆取自網路</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Footer;\n","import { useForm } from \"react-hook-form\";\nimport axios from \"commons/axios\";\nimport { toast } from \"react-toastify\";\n\nconst Login = (props) => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = async (data) => {\n    try {\n      const { email, password } = data;\n      const res = await axios.post(\"/auth/login\", { email, password });\n      const jwToken = res.data;\n      global.auth.setToken(jwToken);\n      toast.success(\"登入成功\");\n      props.history.push(\"/\");\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return (\n    <div className=\"login-wrapper\">\n      <form className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"field\">\n          <label className=\"label\">電子信箱</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.email && \"is-danger\"}`}\n              name=\"email\"\n              type=\"text\"\n              placeholder=\"email\"\n              {...register(\"email\", {\n                required: \"需要填寫信箱\",\n                pattern: {\n                  value:\n                    /^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z]+$/,\n                  message: \"格式錯誤\",\n                },\n              })}\n            />\n            {errors.email && (\n              <p className=\"helper has-text-danger\">{errors.email.message}</p>\n            )}\n          </div>\n        </div>\n        <div className=\"field\">\n          <label className=\"label\">密碼</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.password && \"is-danger\"}`}\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"password\"\n              {...register(\"password\", {\n                required: \"需要填寫密碼\",\n                minLength: {\n                  value: 6,\n                  message: \"密碼需要大於6位數\",\n                },\n              })}\n            />\n            {errors.password && (\n              <p className=\"helper has-text-danger\">\n                {errors.password.message}\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"control\">\n          <button className=\"button is-fullwidth is-primary\">Login</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport axios from \"commons/axios\";\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\nimport Layout from \"Layout\";\nimport CartItem from \"component/CartItem\";\n\nexport default class cart extends Component {\n  state = {\n    carts: [],\n  };\n  componentDidMount() {\n    const user = global.auth.getUser() || {};\n    axios.get(`/carts?userId=${user.email}`).then((res) =>\n      this.setState({\n        carts: res.data,\n      })\n    );\n  }\n\n  totalPrice = () => {\n    const totalPrice = this.state.carts\n      .map((cart) => cart.mount * parseInt(cart.price))\n      .reduce((a, value) => a + value, 0);\n    return totalPrice;\n  };\n\n  updateCart = (cart) => {\n    const newCarts = [...this.state.carts]; //複製新的購物車\n    const _index = newCarts.findIndex((c) => c.id === cart.id);\n    newCarts.splice(_index, 1, cart);\n    this.setState({\n      carts: newCarts,\n    });\n  };\n\n  deleteCart = (cart) => {\n    const _cart = this.state.carts.filter((c) => c.id !== cart.id);\n    this.setState({\n      carts: _cart,\n    });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <div className=\"cart-page\">\n          <span className=\"cart-title\">購物車</span>\n          <div className=\"cart-list\">\n            <TransitionGroup component={null}>\n              {this.state.carts.map((cart) => (\n                <CSSTransition\n                  classNames=\"cart-item\"\n                  timeout={300}\n                  key={cart.id}\n                >\n                  <CartItem\n                    key={cart.id}\n                    cart={cart}\n                    updateCart={this.updateCart}\n                    deleteCart={this.deleteCart}\n                  />\n                </CSSTransition>\n              ))}\n            </TransitionGroup>\n          </div>\n          {this.state.carts.length === 0 && (\n            <p className=\"no-cart\">還沒有商品，趕快加入購物車吧！</p>\n          )}\n          <div className=\"cart-total\">\n            總額: <span className=\"total-price\">${this.totalPrice()}</span>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"commons/axios\";\nexport default class CartItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mount: this.props.cart.mount,\n    };\n  }\n  handleChange = (e) => {\n    const _mount = parseInt(e.target.value);\n    this.setState({ mount: _mount });\n    const newCart = { ...this.props.cart, mount: _mount };\n    axios.put(`/carts/${this.props.cart.id}`, newCart).then((res) => {\n      this.props.updateCart(newCart);\n    });\n  };\n\n  deleteCart = () => {\n    axios\n      .delete(`/carts/${this.props.cart.id}`)\n      .then((res) => this.props.deleteCart(this.props.cart));\n  };\n\n  render() {\n    const { name, image, price } = this.props.cart || {};\n    const sumPrice = this.state.mount * parseInt(price);\n    return (\n      <div className=\"columns is-vcentered\">\n        <div className=\"column is-narrow\" onClick={this.deleteCart}>\n          <span className=\"close\">X</span>\n        </div>\n        <div className=\"column is-narrow\">\n          <div className=\"cart-image\">\n            <img src={image} alt=\"\" />\n          </div>\n        </div>\n        <div className=\"column cart-name is-narrow\">{name}</div>\n        <div className=\"column\">\n          <span className=\"price\">${price}</span>\n        </div>\n        <div className=\"column\">\n          <input\n            type=\"number\"\n            min={1}\n            className=\"input num-input\"\n            defaultValue={this.state.mount}\n            onChange={this.handleChange}\n          />\n        </div>\n        <div className=\"column\">\n          <span className=\"sum-price\">${sumPrice}</span>\n        </div>\n      </div>\n    );\n  }\n}\n","import { useForm } from \"react-hook-form\";\nimport axios from \"commons/axios\";\nimport { toast } from \"react-toastify\";\n\nconst Register = (props) => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = async (data) => {\n    console.log(data);\n\n    try {\n      const { nickname, email, password } = data;\n      const res = await axios.post(\"/auth/register\", {\n        nickname,\n        email,\n        password,\n        type: 0,\n      });\n      const jwToken = res.data;\n      global.auth.setToken(jwToken);\n      console.log(jwToken);\n      toast.success(\"註冊成功\");\n      props.history.push(\"/\");\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return (\n    <div className=\"login-wrapper\">\n      <form className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"field\">\n          <label className=\"label\">暱稱</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.nickname && \"is-danger\"}`}\n              name=\"nickname\"\n              type=\"text\"\n              placeholder=\"nickname\"\n              {...register(\"nickname\", {\n                required: \"需要填寫暱稱\",\n              })}\n            />\n            {errors.nickname && (\n              <p className=\"helper has-text-danger\">\n                {errors.nickname.message}\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"field\">\n          <label className=\"label\">電子信箱</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.email && \"is-danger\"}`}\n              name=\"email\"\n              type=\"text\"\n              placeholder=\"email\"\n              {...register(\"email\", {\n                required: \"需要填寫信箱\",\n                pattern: {\n                  value:\n                    /^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z]+$/,\n                  message: \"格式錯誤\",\n                },\n              })}\n            />\n            {errors.email && (\n              <p className=\"helper has-text-danger\">{errors.email.message}</p>\n            )}\n          </div>\n        </div>\n        <div className=\"field\">\n          <label className=\"label\">密碼</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.password && \"is-danger\"}`}\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"password\"\n              {...register(\"password\", {\n                required: \"需要填寫密碼\",\n                minLength: {\n                  value: 6,\n                  message: \"密碼需要大於6位數\",\n                },\n              })}\n            />\n            {errors.password && (\n              <p className=\"helper has-text-danger\">\n                {errors.password.message}\n              </p>\n            )}\n          </div>\n        </div>\n        <br />\n        <div className=\"control\">\n          <button className=\"button is-fullwidth is-primary\">確認</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Register;\n","import { useState, useEffect } from \"react\";\n\nconst useRWD = () => {\n  const [device, setDevice] = useState(\"mobile\");\n\n  const handleRWD = () => {\n    if (window.innerWidth > 1068) setDevice(\"PC\");\n    else if (window.innerWidth > 576) setDevice(\"tablet\");\n    else setDevice(\"mobile\");\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleRWD);\n    handleRWD();\n    return () => {\n      window.removeEventListener(\"resize\", handleRWD);\n    };\n  }, []);\n\n  return device;\n};\n\nexport default useRWD;\n","import React, { useState } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport UserProfile from \"component/UserProfile\";\nimport Panel from \"component/Panel\";\nimport useRWD from \"commons/useRWD\";\n\nconst Header = ({ user, history }) => {\n  let device = useRWD();\n  const iconName = () => {\n    if (device === \"mobile\") {\n      return <p>蕨鹿逢生</p>;\n    } else {\n      return <p>Home</p>;\n    }\n  };\n\n  const toProfile = () => {\n    Panel.open({\n      component: UserProfile,\n      props: {\n        user: user,\n      },\n      callback: (data) => {\n        console.log(data);\n        if (data === \"Logout\") {\n          history.go(0);\n        }\n      },\n    });\n  };\n\n  return (\n    <div className=\"header\">\n      <div className=\"grid\">\n        <div className=\"start\">\n          <Link to=\"/\">{iconName()}</Link>\n        </div>\n        <div className=\"end\">\n          {user.nickname ? (\n            <span className=\"nickname\" onClick={toProfile}>\n              <i className=\"far fa-user\"></i>\n              {user.nickname}\n            </span>\n          ) : (\n            <React.Fragment>\n              <Link to=\"/login\">Login</Link>\n              <Link to=\"/register\">Register</Link>\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Header);\n","import _axios from \"axios\";\n\nconst axios = (baseURL) => {\n  const instance = _axios.create({\n    baseURL: \"http://localhost:3004\",\n    timeout: \"1000\",\n  });\n\n  // 配置攔截器\n  instance.interceptors.request.use(\n    (config) => {\n      // Do something before request is sent\n      const jwToken = global.auth.getToken();\n\n      config.headers[\"Authorization\"] = \"Bearer \" + jwToken;\n      // console.log(config.headers.Authorization);\n      return config;\n    },\n    (error) => {\n      // Do something with request error\n      return Promise.reject(error);\n    }\n  );\n\n  return instance;\n};\n\nexport { axios };\nexport default axios();\n","import decode from \"jwt-decode\";\n\nconst JWT = \"store_token_id\";\n\nconst setToken = (token) => {\n  localStorage.setItem(JWT, token);\n};\n\nconst getToken = (token) => {\n  return localStorage.getItem(JWT);\n};\n\nconst isLogin = () => {\n  const jwToken = getToken();\n\n  return !!jwToken && !isTokenExpired(jwToken);\n};\n\nconst isTokenExpired = (token) => {\n  try {\n    const _info = decode(token);\n    if (_info.exp < Date.now() / 1000) {\n      return true;\n    } else return false;\n  } catch (error) {\n    return false;\n  }\n};\n\nconst getUser = () => {\n  const jwToken = getToken();\n\n  if (isLogin()) {\n    const user = decode(jwToken);\n\n    return user;\n  } else {\n    return null;\n  }\n};\n\nconst logout = () => {\n  localStorage.removeItem(JWT);\n};\n\nglobal.auth = {\n  setToken,\n  getUser,\n  isLogin,\n  logout,\n  getToken,\n};\n","import React from \"react\";\nimport Products from \"component/Products\";\nimport Layout from \"Layout\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <Layout>\n        <Products />\n      </Layout>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\n\nconst NotFound = () => {\n  return <div className=\"not-found\">NOT FOUND</div>;\n};\n\nexport default NotFound;\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport App from \"pages/App\";\nimport Login from \"pages/Login\";\nimport Cart from \"pages/Cart\";\nimport NotFound from \"pages/NotFound\";\nimport Register from \"pages/Register\";\n\nconst Router = () => {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/\" exact component={App} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/cart\" component={Cart} />\n        <Route path=\"/register\" component={Register} />\n        <Route component={NotFound} />\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default Router;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Router from \"Router\";\nimport \"public/css/app.scss\";\nimport \"public/css/style.scss\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"commons/auth\";\n\nReactDOM.render(\n  <div>\n    <ToastContainer\n      position=\"top-right\"\n      autoClose={5000}\n      hideProgressBar\n      newestOnTop={false}\n      closeOnClick\n      rtl={false}\n      pauseOnVisionChange\n      draggable\n      pauseOnHover\n    />\n    <Router />\n  </div>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}